2025-11-06 11:56:58,891 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-06 11:56:58,891 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-10 12:23:17,900 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-10 12:23:17,900 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-10 12:23:40,833 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, intercepting: False, intelligent: False, phi: True
2025-11-10 12:23:40,834 - phi_educational_agent - INFO - Initializing PhiEducationalAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2025-11-10 12:23:40,848 - phi_educational_agent - INFO - PhiEducationalAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2025-11-10 12:23:40,848 - main - INFO - Created phi agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2025-11-10 12:23:40,849 - main - INFO - üî• Using Phi Native Agent (dynamic SQL generation from natural language)
2025-11-10 12:23:40,849 - phi_educational_agent - INFO - === PHI AGENT PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2025-11-10 12:23:40,849 - phi_educational_agent - INFO - User Query: Show me the list of authorized paid softwares with investment amount
2025-11-10 12:23:43,549 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-10 12:24:30,509 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-10 12:24:31,575 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-11-10 12:24:31,581 - phi_educational_agent - INFO - √¢≈ì‚Ä¶ PHI AGENT COMPLETED successfully
2025-11-10 12:24:31,581 - main - INFO - üìä Execution Summary (phi_native): Dynamic SQL generation completed
2025-11-12 13:40:37,233 - __main__ - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 13:40:37,237 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-12 13:40:37,237 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-12 13:40:37,271 - main - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 13:40:40,944 - main - INFO - üì® Incoming Request - Origin: swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:40:40,944 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: swye360.ai
2025-11-12 13:41:22,700 - main - INFO - üì® Incoming Request - Origin: swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:41:22,701 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: swye360.ai
2025-11-12 13:41:26,018 - __main__ - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 13:41:26,021 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-12 13:41:26,021 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-12 13:41:26,047 - main - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 13:41:27,714 - main - INFO - üì® Incoming Request - Origin: swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:41:27,714 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: swye360.ai
2025-11-12 13:41:36,656 - main - INFO - üì® Incoming Request - Origin: swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:41:36,656 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: swye360.ai
2025-11-12 13:41:42,363 - main - INFO - üì® Incoming Request - Origin: No Origin Header | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:41:42,363 - main - INFO - ‚ÑπÔ∏è  No Origin header - allowing request (direct API access)
2025-11-12 13:41:42,366 - tool_intercepting_agent - INFO - Initializing ToolCallInterceptingAgent for district: test
2025-11-12 13:41:42,368 - tool_intercepting_agent - INFO - Agent initialized successfully for district: test
2025-11-12 13:48:19,339 - __main__ - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 13:48:19,342 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-12 13:48:19,343 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-12 13:48:19,369 - main - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 13:48:27,246 - main - INFO - üì® Incoming Request - Origin: swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:48:27,246 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: swye360.ai
2025-11-12 13:48:43,979 - main - INFO - üì® Incoming Request - Origin: https://swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 13:48:43,979 - main - INFO - ‚úÖ Origin ALLOWED: https://swye360.ai
2025-11-12 13:48:43,982 - tool_intercepting_agent - INFO - Initializing ToolCallInterceptingAgent for district: test
2025-11-12 13:48:43,984 - tool_intercepting_agent - INFO - Agent initialized successfully for district: test
2025-11-12 14:25:15,255 - __main__ - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 14:25:15,259 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-12 14:25:15,259 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-12 14:25:15,290 - main - INFO - üîí CORS allowed origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:8001', 'http://127.0.0.1:3000', 'http://127.0.0.1:8000', 'http://127.0.0.1:8001', 'https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai']
2025-11-12 14:25:18,800 - main - INFO - üì® Incoming Request - Origin: No Origin Header | Referer: No Referer | Host: localhost:8000 | Path: /health
2025-11-12 14:25:18,801 - main - ERROR - üö´ BLOCKED - No Origin header present for path: /health
2025-11-17 19:27:16,294 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2025-11-17 19:27:16,298 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-17 19:27:16,298 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-17 19:27:16,367 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2025-11-17 19:27:26,842 - main - INFO - üì® Incoming Request - Origin: No Origin Header | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 19:27:26,843 - main - ERROR - üö´ BLOCKED - No Origin header present for path: /api/ask
2025-11-17 20:00:45,547 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2025-11-17 20:00:45,552 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-17 20:00:45,552 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-17 20:00:45,581 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2025-11-17 20:02:40,086 - main - INFO - üì® Incoming Request - Origin: No Origin Header | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:02:40,087 - main - ERROR - üö´ BLOCKED - No Origin header present for path: /api/ask
2025-11-17 20:11:51,615 - main - INFO - üì® Incoming Request - Origin: https://swye360.ai/ | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:11:51,617 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: https://swye360.ai/
2025-11-17 20:12:11,575 - main - INFO - üì® Incoming Request - Origin: https://swye360.ai/ | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:12:11,577 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: https://swye360.ai/
2025-11-17 20:12:21,883 - main - INFO - üì® Incoming Request - Origin: https://swye360.ai/ | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:12:21,888 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: https://swye360.ai/
2025-11-17 20:12:31,103 - main - INFO - üì® Incoming Request - Origin: swye360.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:12:31,104 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: swye360.ai
2025-11-17 20:13:03,281 - main - INFO - üì® Incoming Request - Origin: https://preview--roi-bright-future.lovable.app/ | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:13:03,283 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: https://preview--roi-bright-future.lovable.app/
2025-11-17 20:13:20,653 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:13:20,657 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2025-11-17 20:13:50,349 - main - INFO - üì® Incoming Request - Origin: No Origin Header | Referer: No Referer | Host: localhost:8000 | Path: /api/health
2025-11-17 20:13:50,350 - main - ERROR - üö´ BLOCKED - No Origin header present for path: /api/health
2025-11-17 20:13:51,773 - main - INFO - üì® Incoming Request - Origin: No Origin Header | Referer: No Referer | Host: localhost:8000 | Path: /api/health
2025-11-17 20:13:51,773 - main - ERROR - üö´ BLOCKED - No Origin header present for path: /api/health
2025-11-17 20:14:06,634 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/health
2025-11-17 20:14:06,636 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2025-11-17 20:14:12,638 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/health
2025-11-17 20:14:12,639 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2025-11-17 20:14:18,571 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:14:18,572 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2025-11-17 20:14:33,880 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 20:14:33,882 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2025-11-17 20:14:33,886 - main - INFO - Received request for district 460a1bae-1070-4090-908d-6b3d02e74325, verbose: True, intercepting: False, intelligent: False, phi: True
2025-11-17 20:14:33,888 - phi_educational_agent - INFO - Initializing PhiEducationalAgent for district: 460a1bae-1070-4090-908d-6b3d02e74325
2025-11-17 20:14:33,914 - phi_educational_agent - INFO - PhiEducationalAgent initialized successfully for district: 460a1bae-1070-4090-908d-6b3d02e74325
2025-11-17 20:14:33,914 - main - INFO - Created phi agent for district: 460a1bae-1070-4090-908d-6b3d02e74325
2025-11-17 20:14:33,914 - main - INFO - üî• Using Phi Native Agent (dynamic SQL generation from natural language)
2025-11-17 20:14:33,914 - phi_educational_agent - INFO - === PHI AGENT PROCESSING FOR DISTRICT 460a1bae-1070-4090-908d-6b3d02e74325 ===
2025-11-17 20:14:33,914 - phi_educational_agent - INFO - User Query: What paid math software is most used in middle school ?
2025-11-17 20:14:38,775 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:14:46,398 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:14:53,137 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:14:59,380 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:04,033 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:08,626 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:14,544 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:20,478 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:24,596 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:29,603 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:34,472 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:42,950 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:47,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:52,738 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:15:59,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:06,078 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:11,420 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:16,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:22,292 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:27,782 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:36,035 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:40,757 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:45,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:50,471 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:16:55,149 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:00,820 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:05,903 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:11,276 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:14,733 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:20,390 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:23,907 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:28,268 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:17:58,330 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:18:21,649 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 20:18:22,757 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2025-11-17 20:18:22,765 - phi_educational_agent - INFO - √¢≈ì‚Ä¶ PHI AGENT COMPLETED successfully
2025-11-17 20:18:22,766 - main - INFO - üìä Execution Summary (phi_native): Dynamic SQL generation completed
2025-11-17 21:11:07,188 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2025-11-17 21:11:07,190 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2025-11-17 21:11:07,204 - main - INFO - Received request for district 460a1bae-1070-4090-908d-6b3d02e74325, verbose: True, intercepting: False, intelligent: False, phi: True
2025-11-17 21:11:07,204 - main - INFO - üî• Using Phi Native Agent (dynamic SQL generation from natural language)
2025-11-17 21:11:07,205 - phi_educational_agent - INFO - === PHI AGENT PROCESSING FOR DISTRICT 460a1bae-1070-4090-908d-6b3d02e74325 ===
2025-11-17 21:11:07,205 - phi_educational_agent - INFO - User Query: What paid math software is most used in middle school ?
2025-11-17 21:11:13,125 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-17 21:12:12,222 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2025-11-17 21:12:12,226 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2025-11-17 21:12:12,226 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2025-11-17 21:12:12,256 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 14:59:35,910 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 14:59:35,914 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 14:59:35,914 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 14:59:36,052 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 14:59:39,291 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 14:59:39,291 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 14:59:39,301 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 14:59:39,301 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 14:59:39,302 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 14:59:39,302 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 14:59:39,302 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 14:59:39,302 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 14:59:39,302 - mv_optimized_agent - INFO - User Query: show all the active profiles with total usage hours for each of them
2026-01-15 14:59:39,302 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 14:59:39,302 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 14:59:39,303 - mv_optimized_agent - INFO -    Primary Intent: software_usage
2026-01-15 14:59:39,303 - mv_optimized_agent - INFO -    All Intents: ['software_usage', 'user_analytics', 'active_users']
2026-01-15 14:59:39,303 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-15 14:59:39,303 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 14:59:41,077 - mv_query_router - WARNING - Connection error (attempt 1): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:42,632 - mv_query_router - WARNING - Connection error (attempt 2): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:42,632 - mv_query_router - ERROR - Query failed after 2 attempts: connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:42,633 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:42,633 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-01-15 14:59:44,231 - mv_query_router - WARNING - Connection error (attempt 1): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:45,768 - mv_query_router - WARNING - Connection error (attempt 2): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:45,769 - mv_query_router - ERROR - Query failed after 2 attempts: connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 14:59:45,769 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 14:59:54,207 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 14:59:55,334 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 14:59:55,336 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 16.03s
2026-01-15 14:59:55,336 - mv_optimized_agent - INFO - üìä MV Queries Executed: 0
2026-01-15 14:59:55,336 - mv_optimized_agent - INFO - üß† Primary Intent: software_usage
2026-01-15 14:59:55,336 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_software_metrics
2026-01-15 14:59:55,336 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "show all the active profiles with total usage hours for each of them",
  "mv_queries": [],
  "intents": [
    "software_usage",
    "user_analytics",
    "active_users"
  ],
  "execution_time": 16.033714056015015,
  "error": null,
  "primary_intent": "software_usage",
  "best_mv": "mv_dashboard_software_metrics"
}
2026-01-15 14:59:55,337 - main - INFO - üìä Execution Summary (mv_optimized): 0 MV queries, 16.03s, intent: software_usage, best_mv: mv_dashboard_software_metrics
2026-01-15 15:02:26,982 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:02:26,983 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:02:26,987 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:02:26,988 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:02:26,988 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:02:26,988 - mv_optimized_agent - INFO - User Query: show all the active profiles with total usage hours for each of them
2026-01-15 15:02:26,988 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:02:26,988 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:02:26,988 - mv_optimized_agent - INFO -    Primary Intent: software_usage
2026-01-15 15:02:26,988 - mv_optimized_agent - INFO -    All Intents: ['software_usage', 'user_analytics', 'active_users']
2026-01-15 15:02:26,989 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-15 15:02:26,989 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:02:28,579 - mv_query_router - WARNING - Connection error (attempt 1): connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:30,175 - mv_query_router - WARNING - Connection error (attempt 2): connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:30,176 - mv_query_router - ERROR - Query failed after 2 attempts: connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:30,177 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:30,177 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-01-15 15:02:31,758 - mv_query_router - WARNING - Connection error (attempt 1): connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:33,288 - mv_query_router - WARNING - Connection error (attempt 2): connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:33,288 - mv_query_router - ERROR - Query failed after 2 attempts: connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:02:33,289 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:02:40,396 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:02:41,494 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:02:41,495 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 14.51s
2026-01-15 15:02:41,495 - mv_optimized_agent - INFO - üìä MV Queries Executed: 0
2026-01-15 15:02:41,495 - mv_optimized_agent - INFO - üß† Primary Intent: software_usage
2026-01-15 15:02:41,495 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_software_metrics
2026-01-15 15:02:41,495 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "show all the active profiles with total usage hours for each of them",
  "mv_queries": [],
  "intents": [
    "software_usage",
    "user_analytics",
    "active_users"
  ],
  "execution_time": 14.507072925567627,
  "error": null,
  "primary_intent": "software_usage",
  "best_mv": "mv_dashboard_software_metrics"
}
2026-01-15 15:02:41,495 - main - INFO - üìä Execution Summary (mv_optimized): 0 MV queries, 14.51s, intent: software_usage, best_mv: mv_dashboard_software_metrics
2026-01-15 15:02:49,059 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:02:49,062 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:02:49,062 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:02:49,092 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:02:53,577 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:02:53,577 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:02:53,586 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:02:53,586 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:02:53,587 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:02:53,587 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:02:53,587 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:02:53,587 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:02:53,587 - mv_optimized_agent - INFO - User Query: show all the active profiles with total usage hours for each of them
2026-01-15 15:02:53,587 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:02:53,587 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:02:53,588 - mv_optimized_agent - INFO -    Primary Intent: software_usage
2026-01-15 15:02:53,588 - mv_optimized_agent - INFO -    All Intents: ['software_usage', 'user_analytics', 'active_users']
2026-01-15 15:02:53,588 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-15 15:02:53,588 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:02:54,034 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,036 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,036 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,036 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,036 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-01-15 15:02:54,037 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,038 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,038 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "db.ytpwaryvxdrwtevltgwp.supabase.co" to address: nodename nor servname provided, or not known

2026-01-15 15:02:54,039 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:03:00,302 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:03:01,379 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:03:01,380 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 7.79s
2026-01-15 15:03:01,380 - mv_optimized_agent - INFO - üìä MV Queries Executed: 0
2026-01-15 15:03:01,381 - mv_optimized_agent - INFO - üß† Primary Intent: software_usage
2026-01-15 15:03:01,381 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_software_metrics
2026-01-15 15:03:01,381 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "show all the active profiles with total usage hours for each of them",
  "mv_queries": [],
  "intents": [
    "software_usage",
    "user_analytics",
    "active_users"
  ],
  "execution_time": 7.792880058288574,
  "error": null,
  "primary_intent": "software_usage",
  "best_mv": "mv_dashboard_software_metrics"
}
2026-01-15 15:03:01,381 - main - INFO - üìä Execution Summary (mv_optimized): 0 MV queries, 7.79s, intent: software_usage, best_mv: mv_dashboard_software_metrics
2026-01-15 15:04:46,752 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:04:46,754 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:04:46,754 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:04:46,786 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:04:56,547 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:04:56,547 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:04:56,550 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:04:56,551 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:04:56,551 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:04:56,551 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:04:56,551 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:04:56,551 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:04:56,551 - mv_optimized_agent - INFO - User Query: show all the active profiles with total usage hours for each of them
2026-01-15 15:04:56,551 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:04:56,552 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:04:56,552 - mv_optimized_agent - INFO -    Primary Intent: software_usage
2026-01-15 15:04:56,552 - mv_optimized_agent - INFO -    All Intents: ['software_usage', 'user_analytics', 'active_users']
2026-01-15 15:04:56,552 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-15 15:04:56,552 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:04:58,180 - mv_query_router - WARNING - Connection error (attempt 1): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:04:59,763 - mv_query_router - WARNING - Connection error (attempt 2): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:04:59,764 - mv_query_router - ERROR - Query failed after 2 attempts: connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:04:59,764 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:04:59,764 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-01-15 15:05:01,343 - mv_query_router - WARNING - Connection error (attempt 1): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:05:02,912 - mv_query_router - WARNING - Connection error (attempt 2): connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:05:02,913 - mv_query_router - ERROR - Query failed after 2 attempts: connection to server at "aws-0-us-east-1.pooler.supabase.com" (52.45.94.125), port 5432 failed: SSL connection has been closed unexpectedly

2026-01-15 15:05:02,913 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:05:09,717 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:05:10,812 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:05:10,814 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 14.26s
2026-01-15 15:05:10,814 - mv_optimized_agent - INFO - üìä MV Queries Executed: 0
2026-01-15 15:05:10,815 - mv_optimized_agent - INFO - üß† Primary Intent: software_usage
2026-01-15 15:05:10,815 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_software_metrics
2026-01-15 15:05:10,815 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "show all the active profiles with total usage hours for each of them",
  "mv_queries": [],
  "intents": [
    "software_usage",
    "user_analytics",
    "active_users"
  ],
  "execution_time": 14.262746095657349,
  "error": null,
  "primary_intent": "software_usage",
  "best_mv": "mv_dashboard_software_metrics"
}
2026-01-15 15:05:10,815 - main - INFO - üìä Execution Summary (mv_optimized): 0 MV queries, 14.26s, intent: software_usage, best_mv: mv_dashboard_software_metrics
2026-01-15 15:05:59,413 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:05:59,421 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:05:59,421 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:05:59,575 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:06:02,956 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:06:02,961 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:06:03,003 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:06:03,004 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:06:03,013 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:06:03,014 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:06:03,024 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:06:03,024 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:06:03,024 - mv_optimized_agent - INFO - User Query: show all the active profiles with total usage hours for each of them
2026-01-15 15:06:03,025 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:06:03,025 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:06:03,025 - mv_optimized_agent - INFO -    Primary Intent: software_usage
2026-01-15 15:06:03,025 - mv_optimized_agent - INFO -    All Intents: ['software_usage', 'user_analytics', 'active_users']
2026-01-15 15:06:03,025 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-15 15:06:03,025 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:06:06,544 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.519s
2026-01-15 15:06:06,544 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-01-15 15:06:06,876 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:06:30,491 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:06:31,568 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:06:31,569 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 28.54s
2026-01-15 15:06:31,569 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:06:31,569 - mv_optimized_agent - INFO - üß† Primary Intent: software_usage
2026-01-15 15:06:31,569 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_software_metrics
2026-01-15 15:06:31,569 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "show all the active profiles with total usage hours for each of them",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 3.518686056137085
    },
    {
      "method": "get_software_analytics",
      "mv_used": "mv_software_usage_analytics_v4",
      "execution_time": 0.33159399032592773
    }
  ],
  "intents": [
    "software_usage",
    "user_analytics",
    "active_users"
  ],
  "execution_time": 28.544415950775146,
  "error": null,
  "primary_intent": "software_usage",
  "best_mv": "mv_dashboard_software_metrics"
}
2026-01-15 15:06:31,570 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 28.54s, intent: software_usage, best_mv: mv_dashboard_software_metrics
2026-01-15 15:24:51,468 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:24:51,472 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:24:51,472 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:24:51,506 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:24:55,663 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:24:55,664 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:24:55,665 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:24:55,665 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:24:55,665 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:24:55,665 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:24:55,666 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO - User Query: show all the active profiles with total usage hours for each of them
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-15 15:24:55,666 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:24:58,114 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.448s
2026-01-15 15:24:58,114 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-15 15:24:58,698 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:25:20,885 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:25:21,966 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:25:21,967 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 26.30s
2026-01-15 15:25:21,967 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:25:21,967 - mv_optimized_agent - INFO - üß† Primary Intent: active_users
2026-01-15 15:25:21,967 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_user_analytics
2026-01-15 15:25:21,967 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "show all the active profiles with total usage hours for each of them",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.447831630706787
    },
    {
      "method": "get_active_users_summary",
      "mv_used": "mv_active_users_summary",
      "execution_time": 0.5838918685913086
    }
  ],
  "intents": [
    "active_users"
  ],
  "execution_time": 26.30133080482483,
  "error": null,
  "primary_intent": "active_users",
  "best_mv": "mv_dashboard_user_analytics"
}
2026-01-15 15:25:21,967 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 26.30s, intent: active_users, best_mv: mv_dashboard_user_analytics
2026-01-15 15:26:59,516 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:26:59,517 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:26:59,521 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:26:59,521 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:26:59,521 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:26:59,521 - mv_optimized_agent - INFO - User Query: Generate a report on usage data for all the active users shown in a list
2026-01-15 15:26:59,521 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:26:59,521 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:26:59,522 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-15 15:26:59,522 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'report_generation', 'active_users']
2026-01-15 15:26:59,522 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-15 15:26:59,522 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:27:00,041 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.519s
2026-01-15 15:27:00,041 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-15 15:27:00,816 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:27:25,540 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:27:26,598 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:27:26,600 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 27.08s
2026-01-15 15:27:26,600 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:27:26,600 - mv_optimized_agent - INFO - üß† Primary Intent: user_analytics
2026-01-15 15:27:26,601 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_user_analytics
2026-01-15 15:27:26,601 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Generate a report on usage data for all the active users shown in a list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 0.5191030502319336
    },
    {
      "method": "get_user_analytics",
      "mv_used": "mv_dashboard_user_analytics",
      "execution_time": 0.7747399806976318
    }
  ],
  "intents": [
    "user_analytics",
    "report_generation",
    "active_users"
  ],
  "execution_time": 27.078787803649902,
  "error": null,
  "primary_intent": "user_analytics",
  "best_mv": "mv_dashboard_user_analytics"
}
2026-01-15 15:27:26,602 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 27.08s, intent: user_analytics, best_mv: mv_dashboard_user_analytics
2026-01-15 15:30:01,443 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:30:01,444 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:30:01,448 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:30:01,448 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:30:01,448 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:30:01,448 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-15 15:30:01,449 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:30:01,449 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:30:01,449 - mv_optimized_agent - INFO -    Primary Intent: software_usage
2026-01-15 15:30:01,449 - mv_optimized_agent - INFO -    All Intents: ['software_usage']
2026-01-15 15:30:01,449 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-15 15:30:01,449 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:30:01,969 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.520s
2026-01-15 15:30:01,970 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-01-15 15:30:02,271 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:30:21,650 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:30:22,801 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:30:22,802 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 21.35s
2026-01-15 15:30:22,803 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:30:22,803 - mv_optimized_agent - INFO - üß† Primary Intent: software_usage
2026-01-15 15:30:22,803 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_software_metrics
2026-01-15 15:30:22,803 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 0.5197880268096924
    },
    {
      "method": "get_software_analytics",
      "mv_used": "mv_software_usage_analytics_v4",
      "execution_time": 0.3015282154083252
    }
  ],
  "intents": [
    "software_usage"
  ],
  "execution_time": 21.35380506515503,
  "error": null,
  "primary_intent": "software_usage",
  "best_mv": "mv_dashboard_software_metrics"
}
2026-01-15 15:30:22,805 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 21.35s, intent: software_usage, best_mv: mv_dashboard_software_metrics
2026-01-15 15:34:36,899 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:34:36,903 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:34:36,903 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:34:36,933 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:34:40,788 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:34:40,788 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:34:40,790 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:34:40,790 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:34:40,792 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:34:40,792 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:34:40,792 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:34:40,792 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:34:40,793 - mv_optimized_agent - INFO - User Query: Generate a report on usage data for all the active users shown in a list
2026-01-15 15:34:40,793 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:34:45,702 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:34:45,723 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'report_generation']
2026-01-15 15:34:45,724 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:34:45,724 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-15 15:34:45,724 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'report_generation']
2026-01-15 15:34:45,724 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-15 15:34:45,724 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:34:48,217 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.493s
2026-01-15 15:34:48,218 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-15 15:34:48,752 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:35:19,224 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:35:20,323 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:35:20,324 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 39.53s
2026-01-15 15:35:20,324 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:35:20,324 - mv_optimized_agent - INFO - üß† Primary Intent: active_users
2026-01-15 15:35:20,324 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_user_analytics
2026-01-15 15:35:20,324 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Generate a report on usage data for all the active users shown in a list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.4925119876861572
    },
    {
      "method": "get_active_users_summary",
      "mv_used": "mv_active_users_summary",
      "execution_time": 0.5341336727142334
    }
  ],
  "intents": [
    "active_users",
    "report_generation"
  ],
  "execution_time": 39.53109622001648,
  "error": null,
  "primary_intent": "active_users",
  "best_mv": "mv_dashboard_user_analytics"
}
2026-01-15 15:35:20,325 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 39.53s, intent: active_users, best_mv: mv_dashboard_user_analytics
2026-01-15 15:36:06,961 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:36:06,962 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:36:06,966 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:36:06,967 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:36:06,967 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:36:06,967 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-15 15:36:06,967 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:36:07,697 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:36:07,702 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-15 15:36:07,702 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:36:07,702 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-15 15:36:07,703 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-15 15:36:07,703 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-15 15:36:07,703 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:36:08,223 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.520s
2026-01-15 15:36:08,224 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-15 15:36:08,782 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:36:35,026 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:36:36,105 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:36:36,106 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 29.14s
2026-01-15 15:36:36,107 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:36:36,107 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-15 15:36:36,107 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-15 15:36:36,107 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 0.5203781127929688
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.5567691326141357
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 29.13948917388916,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-15 15:36:36,107 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 29.14s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-15 15:39:56,948 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:39:56,953 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:39:56,953 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:39:56,988 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:40:08,696 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:40:08,696 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:40:08,698 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:40:08,699 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:40:08,700 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:40:08,700 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:40:08,700 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:40:08,700 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:40:08,700 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-15 15:40:08,700 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:40:09,761 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:40:09,790 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-15 15:40:09,791 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:40:09,791 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-15 15:40:09,791 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-15 15:40:09,791 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-15 15:40:09,791 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:40:12,685 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.894s
2026-01-15 15:40:12,686 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-15 15:40:13,469 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:40:37,534 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:40:38,637 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:40:38,638 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 29.94s
2026-01-15 15:40:38,638 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:40:38,638 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-15 15:40:38,639 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-15 15:40:38,639 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.8941378593444824
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.7831981182098389
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 29.937669277191162,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-15 15:40:38,640 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 29.94s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-15 15:42:47,480 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:42:47,484 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:42:47,484 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:42:47,510 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:42:50,269 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:42:50,269 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:42:50,270 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:42:50,271 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:42:50,271 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:42:50,271 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:42:50,271 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:42:50,271 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:42:50,271 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-15 15:42:50,272 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:42:51,696 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:42:51,727 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-15 15:42:51,727 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:42:51,727 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-15 15:42:51,727 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-15 15:42:51,727 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-15 15:42:51,727 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:42:54,431 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.703s
2026-01-15 15:42:54,431 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-15 15:42:55,216 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:43:18,106 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:43:19,279 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:43:19,280 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 29.01s
2026-01-15 15:43:19,280 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:43:19,280 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-15 15:43:19,280 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-15 15:43:19,280 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.7034480571746826
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.7847092151641846
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 29.00856590270996,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-15 15:43:19,280 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 29.01s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-15 15:46:23,570 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:46:23,575 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:46:23,575 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:46:23,602 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:46:27,910 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:46:27,911 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:46:27,912 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:46:27,912 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:46:27,913 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:46:27,913 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:46:27,913 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:46:27,913 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:46:27,913 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-15 15:46:27,913 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:46:28,788 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:46:28,812 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-15 15:46:28,812 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:46:28,812 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-15 15:46:28,812 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-15 15:46:28,812 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-15 15:46:28,812 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:46:31,588 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.776s
2026-01-15 15:46:31,588 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-15 15:46:32,355 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:47:39,396 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:47:40,480 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:47:40,481 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 72.57s
2026-01-15 15:47:40,482 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:47:40,482 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-15 15:47:40,482 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-15 15:47:40,482 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.7760658264160156
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.7659060955047607
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 72.56844401359558,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-15 15:47:40,483 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 72.57s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-15 15:48:35,062 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:48:35,064 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:48:35,067 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:48:35,068 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:48:35,068 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:48:35,068 - mv_optimized_agent - INFO - User Query: Generate a report on usage data for all the active users shown in a list
2026-01-15 15:48:35,068 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:48:36,097 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:48:36,102 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'report_generation']
2026-01-15 15:48:36,102 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:48:36,102 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-15 15:48:36,102 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'report_generation']
2026-01-15 15:48:36,103 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-15 15:48:36,103 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:48:36,935 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.832s
2026-01-15 15:48:36,935 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-15 15:48:37,481 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:49:25,950 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:49:27,059 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:49:27,060 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 51.99s
2026-01-15 15:49:27,060 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:49:27,061 - mv_optimized_agent - INFO - üß† Primary Intent: active_users
2026-01-15 15:49:27,061 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_user_analytics
2026-01-15 15:49:27,061 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Generate a report on usage data for all the active users shown in a list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 0.8321647644042969
    },
    {
      "method": "get_active_users_summary",
      "mv_used": "mv_active_users_summary",
      "execution_time": 0.5457470417022705
    }
  ],
  "intents": [
    "active_users",
    "report_generation"
  ],
  "execution_time": 51.992427110672,
  "error": null,
  "primary_intent": "active_users",
  "best_mv": "mv_dashboard_user_analytics"
}
2026-01-15 15:49:27,061 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 51.99s, intent: active_users, best_mv: mv_dashboard_user_analytics
2026-01-15 15:54:10,972 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:54:10,978 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-15 15:54:10,978 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-15 15:54:11,037 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-15 15:54:23,075 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 15:54:23,076 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 15:54:23,078 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 15:54:23,079 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:54:23,080 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:54:23,080 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-15 15:54:23,080 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 15:54:23,080 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 15:54:23,080 - mv_optimized_agent - INFO - User Query: Generate a report on usage data for all the active users shown in a list
2026-01-15 15:54:23,081 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 15:54:24,157 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:54:24,183 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'report_generation']
2026-01-15 15:54:24,183 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 15:54:24,183 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-15 15:54:24,183 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'report_generation']
2026-01-15 15:54:24,183 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-15 15:54:24,183 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 15:54:26,935 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.752s
2026-01-15 15:54:26,937 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-15 15:54:28,106 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 15:57:24,204 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 15:57:25,602 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 15:57:25,603 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 182.52s
2026-01-15 15:57:25,603 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 15:57:25,604 - mv_optimized_agent - INFO - üß† Primary Intent: active_users
2026-01-15 15:57:25,604 - mv_optimized_agent - INFO - üìÅ Best MV: mv_dashboard_user_analytics
2026-01-15 15:57:25,605 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Generate a report on usage data for all the active users shown in a list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.7521772384643555
    },
    {
      "method": "get_active_users_summary",
      "mv_used": "mv_active_users_summary",
      "execution_time": 1.169360876083374
    }
  ],
  "intents": [
    "active_users",
    "report_generation"
  ],
  "execution_time": 182.52250385284424,
  "error": null,
  "primary_intent": "active_users",
  "best_mv": "mv_dashboard_user_analytics"
}
2026-01-15 15:57:25,609 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 182.52s, intent: active_users, best_mv: mv_dashboard_user_analytics
2026-01-15 16:00:19,243 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-15 16:00:19,245 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-15 16:00:19,249 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-15 16:00:19,249 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-15 16:00:19,249 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-15 16:00:19,249 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-15 16:00:19,249 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-15 16:00:19,984 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 16:00:19,989 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-15 16:00:19,990 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-15 16:00:19,990 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-15 16:00:19,990 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-15 16:00:19,990 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-15 16:00:19,990 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-15 16:00:20,778 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.788s
2026-01-15 16:00:20,778 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-15 16:00:21,575 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-15 16:03:16,420 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-15 16:03:17,861 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-15 16:03:17,862 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 178.61s
2026-01-15 16:03:17,862 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-15 16:03:17,862 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-15 16:03:17,862 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-15 16:03:17,862 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 0.7876849174499512
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.796623945236206
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 178.61259603500366,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-15 16:03:17,863 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 178.61s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-16 12:27:00,003 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-16 12:27:00,009 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-16 12:27:00,009 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-16 12:27:00,078 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-16 12:38:20,350 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-16 12:38:20,354 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-16 12:38:20,354 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-16 12:38:20,386 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-16 12:39:30,136 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-16 12:39:30,137 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-16 12:39:30,160 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-16 12:39:30,161 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 12:39:30,166 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 12:39:30,166 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 12:39:30,166 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-16 12:39:30,166 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-16 12:39:30,166 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-16 12:39:30,166 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-16 12:39:31,916 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 12:39:31,949 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-16 12:39:31,949 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-16 12:39:31,949 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-16 12:39:31,949 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-16 12:39:31,949 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-16 12:39:31,949 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-16 12:39:35,025 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.075s
2026-01-16 12:39:35,026 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-16 12:39:35,971 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-16 12:43:04,416 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 12:43:06,847 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-16 12:43:06,919 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 216.75s
2026-01-16 12:43:06,921 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-16 12:43:06,921 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-16 12:43:06,921 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-16 12:43:06,931 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 3.074826955795288
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.9445450305938721
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 216.752454996109,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-16 12:43:06,933 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 216.75s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-16 13:16:00,627 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask/stream
2026-01-16 13:16:00,740 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-16 13:16:07,106 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-16 13:16:07,118 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-16 13:16:07,118 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-16 13:16:07,224 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://preview--roi-bright-future.lovable.app']
2026-01-16 13:16:10,111 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask/stream
2026-01-16 13:16:10,111 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-16 13:16:10,114 - main - INFO - [STREAM] Received request for district your-district-id
2026-01-16 13:16:10,114 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: your-district-id
2026-01-16 13:16:10,152 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: your-district-id
2026-01-16 13:16:10,152 - main - INFO - Created MV-optimized agent for district: your-district-id
2026-01-16 13:16:10,152 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-16 13:16:10,153 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT your-district-id ===
2026-01-16 13:16:10,153 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-16 13:16:10,153 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-16 13:16:11,279 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:16:11,311 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-16 13:16:11,313 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-16 13:16:11,313 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-16 13:16:11,313 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-16 13:16:11,313 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-16 13:16:11,313 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-16 13:16:13,745 - mv_query_router - ERROR - Query execution error: invalid input syntax for type uuid: "your-district-id"
LINE 14:         WHERE district_id = 'your-district-id'
                                     ^

2026-01-16 13:16:13,745 - mv_query_router - ERROR - Query failed after 2 attempts: invalid input syntax for type uuid: "your-district-id"
LINE 14:         WHERE district_id = 'your-district-id'
                                     ^

2026-01-16 13:16:13,746 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: invalid input syntax for type uuid: "your-district-id"
LINE 14:         WHERE district_id = 'your-district-id'
                                     ^

2026-01-16 13:16:13,746 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-16 13:16:14,005 - mv_query_router - ERROR - Query execution error: invalid input syntax for type uuid: "your-district-id"
LINE 17:         WHERE district_id = 'your-district-id' AND total_inv...
                                     ^

2026-01-16 13:16:14,006 - mv_query_router - ERROR - Query failed after 2 attempts: invalid input syntax for type uuid: "your-district-id"
LINE 17:         WHERE district_id = 'your-district-id' AND total_inv...
                                     ^

2026-01-16 13:16:14,008 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-16 13:16:15,303 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:16:39,555 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask
2026-01-16 13:16:39,557 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-16 13:16:39,563 - main - INFO - Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325, verbose: True, mv_optimized: True, intercepting: False, intelligent: False, phi: False
2026-01-16 13:16:39,564 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:16:39,921 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:16:39,925 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:16:39,925 - main - INFO - üöÄ Using MV-Optimized Agent (10-100x faster using materialized views)
2026-01-16 13:16:39,925 - mv_optimized_agent - INFO - === MV OPTIMIZED PROCESSING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-16 13:16:39,925 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-16 13:16:39,925 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-16 13:16:41,884 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:16:41,891 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-16 13:16:41,891 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-16 13:16:41,891 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-16 13:16:41,891 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-16 13:16:41,891 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-16 13:16:41,891 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-16 13:16:44,489 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.597s
2026-01-16 13:16:44,490 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-16 13:16:45,284 - mv_optimized_agent - INFO - üé® STEP 2: Generating HTML analysis...
2026-01-16 13:19:07,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:19:08,861 - httpx - INFO - HTTP Request: POST https://api.phidata.com/v1/telemetry/agent/run/create "HTTP/1.1 200 OK"
2026-01-16 13:19:08,862 - mv_optimized_agent - INFO - ‚úÖ MV OPTIMIZED PROCESSING COMPLETED in 148.94s
2026-01-16 13:19:08,862 - mv_optimized_agent - INFO - üìä MV Queries Executed: 2
2026-01-16 13:19:08,862 - mv_optimized_agent - INFO - üß† Primary Intent: software_investment
2026-01-16 13:19:08,862 - mv_optimized_agent - INFO - üìÅ Best MV: mv_software_investment_summary
2026-01-16 13:19:08,862 - mv_optimized_agent - DEBUG - üìã Full Execution Log: {
  "district_id": "3ef51192-1070-4090-908d-ef3ab03b4325",
  "user_query": "Show me all the paid software list",
  "mv_queries": [
    {
      "method": "get_dashboard_metrics",
      "mv_used": "mv_dashboard_software_metrics",
      "execution_time": 2.597203016281128
    },
    {
      "method": "get_investment_analysis",
      "mv_used": "mv_software_investment_summary",
      "execution_time": 0.7940061092376709
    }
  ],
  "intents": [
    "software_investment"
  ],
  "execution_time": 148.93638706207275,
  "error": null,
  "primary_intent": "software_investment",
  "best_mv": "mv_software_investment_summary"
}
2026-01-16 13:19:08,864 - main - INFO - üìä Execution Summary (mv_optimized): 2 MV queries, 148.94s, intent: software_investment, best_mv: mv_software_investment_summary
2026-01-16 13:19:40,624 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask/stream
2026-01-16 13:19:40,626 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-16 13:19:40,635 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:19:40,636 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:19:40,669 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:19:40,669 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:19:40,669 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-16 13:19:40,669 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-16 13:19:40,669 - mv_optimized_agent - INFO - User Query: Show me all the paid software list
2026-01-16 13:19:40,670 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-16 13:19:42,384 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:19:42,389 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment']
2026-01-16 13:19:42,389 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-16 13:19:42,390 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-01-16 13:19:42,390 - mv_optimized_agent - INFO -    All Intents: ['software_investment']
2026-01-16 13:19:42,390 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-01-16 13:19:42,390 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-16 13:19:46,279 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.889s
2026-01-16 13:19:46,280 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-01-16 13:19:47,069 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-16 13:19:48,245 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:21:00,735 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 80.06s
2026-01-16 13:22:33,865 - main - INFO - üì® Incoming Request - Origin: https://classsight.ai | Referer: No Referer | Host: localhost:8000 | Path: /api/ask/stream
2026-01-16 13:22:33,870 - main - INFO - ‚úÖ Origin ALLOWED: https://classsight.ai
2026-01-16 13:22:33,874 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-01-16 13:22:33,874 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-16 13:22:33,875 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-01-16 13:22:33,875 - mv_optimized_agent - INFO - User Query: Show we all the active users list
2026-01-16 13:22:33,875 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-16 13:22:34,568 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:22:34,575 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-01-16 13:22:34,575 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-16 13:22:34,575 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-16 13:22:34,575 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-01-16 13:22:34,575 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-16 13:22:34,575 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-16 13:22:35,334 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.759s
2026-01-16 13:22:35,334 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-16 13:22:35,974 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-16 13:22:36,978 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-16 13:23:47,229 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 73.35s
2026-01-30 12:52:21,740 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app']
2026-01-30 12:52:21,750 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 12:52:21,750 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 12:52:21,914 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app']
2026-01-30 12:58:11,597 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 12:58:11,598 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: http://localhost:8080
2026-01-30 12:58:21,432 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 12:58:21,442 - main - ERROR - üö´ BLOCKED - Origin NOT in allowed list: http://localhost:8080
2026-01-30 12:59:24,216 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 12:59:24,223 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 12:59:24,223 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 12:59:24,263 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 12:59:28,658 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 12:59:28,658 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 12:59:28,660 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 12:59:28,660 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 12:59:28,660 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 12:59:28,661 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 12:59:28,707 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 12:59:28,707 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 12:59:28,707 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 12:59:28,708 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 12:59:28,708 - mv_optimized_agent - INFO - User Query: provide Peer District Benchmarking insights
2026-01-30 12:59:28,708 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 12:59:30,593 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 12:59:30,625 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['school_analysis', 'user_analytics']
2026-01-30 12:59:30,626 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 12:59:30,626 - mv_optimized_agent - INFO -    Primary Intent: school_analysis
2026-01-30 12:59:30,626 - mv_optimized_agent - INFO -    All Intents: ['school_analysis', 'user_analytics']
2026-01-30 12:59:30,626 - mv_optimized_agent - INFO -    Best MV: mv_report_data_unified_v4
2026-01-30 12:59:30,626 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 12:59:35,420 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 4.792s
2026-01-30 12:59:35,424 - mv_optimized_agent - INFO -    üìä Calling get_school_analysis()...
2026-01-30 12:59:36,331 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 12:59:39,663 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:00:03,225 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 34.51s
2026-01-30 13:25:05,680 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:25:05,688 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 13:25:05,688 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 13:25:05,744 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:25:14,778 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:25:14,778 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:25:14,781 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:25:14,781 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:25:14,786 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:25:14,786 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:25:14,828 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:25:14,828 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:25:14,828 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:25:14,828 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:25:14,828 - mv_optimized_agent - INFO - User Query: provide Peer District Benchmarking insights
2026-01-30 13:25:14,828 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:25:17,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:25:17,234 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['peer_benchmarking']
2026-01-30 13:25:17,234 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:25:17,234 - mv_optimized_agent - INFO -    Primary Intent: peer_benchmarking
2026-01-30 13:25:17,234 - mv_optimized_agent - INFO -    All Intents: ['peer_benchmarking']
2026-01-30 13:25:17,234 - mv_optimized_agent - INFO -    Best MV: peer_district_metrics
2026-01-30 13:25:17,234 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 13:25:20,468 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.234s
2026-01-30 13:25:20,474 - mv_optimized_agent - INFO -    üìä Calling get_peer_benchmarking_summary()...
2026-01-30 13:25:20,776 - mv_query_router - ERROR - Query execution error: column "district_name" does not exist
LINE 3:             district_id, district_name, state, enrollment,
                                 ^

2026-01-30 13:25:20,776 - mv_query_router - ERROR - Query failed after 2 attempts: column "district_name" does not exist
LINE 3:             district_id, district_name, state, enrollment,
                                 ^

2026-01-30 13:25:20,780 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:25:25,375 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:28:05,618 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 170.78s
2026-01-30 13:32:24,556 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:32:24,563 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 13:32:24,563 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 13:32:24,601 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:32:46,406 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:32:46,407 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:32:46,408 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:32:46,409 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:32:46,462 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:32:46,462 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:32:46,462 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:32:46,462 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:32:46,462 - mv_optimized_agent - INFO - User Query: provide Peer District Benchmarking insights
2026-01-30 13:32:46,462 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:32:48,639 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:32:48,672 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['peer_benchmarking']
2026-01-30 13:32:48,672 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:32:48,672 - mv_optimized_agent - INFO -    Primary Intent: peer_benchmarking
2026-01-30 13:32:48,672 - mv_optimized_agent - INFO -    All Intents: ['peer_benchmarking']
2026-01-30 13:32:48,672 - mv_optimized_agent - INFO -    Best MV: peer_district_metrics
2026-01-30 13:32:48,673 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 13:34:09,765 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 81.092s
2026-01-30 13:34:09,767 - mv_optimized_agent - INFO -    üìä Calling get_peer_benchmarking_summary()...
2026-01-30 13:34:10,357 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:34:11,792 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:35:50,243 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 183.78s
2026-01-30 13:40:28,103 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:40:28,113 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 13:40:28,113 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 13:40:28,161 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:40:33,964 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:40:33,964 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:40:33,967 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:40:33,967 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:40:33,972 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:40:33,973 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:40:34,023 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:40:34,023 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:40:34,023 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:40:34,023 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:40:34,024 - mv_optimized_agent - INFO - User Query: provide Peer District Benchmarking insights
2026-01-30 13:40:34,024 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:40:35,412 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:40:35,442 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['peer_benchmarking']
2026-01-30 13:40:35,443 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:40:35,443 - mv_optimized_agent - INFO -    Primary Intent: peer_benchmarking
2026-01-30 13:40:35,443 - mv_optimized_agent - INFO -    All Intents: ['peer_benchmarking']
2026-01-30 13:40:35,443 - mv_optimized_agent - INFO -    Best MV: peer_district_metrics
2026-01-30 13:40:35,443 - mv_optimized_agent - INFO -    üìä Calling get_peer_benchmarking_summary()...
2026-01-30 13:40:38,304 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:40:38,927 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:40:49,403 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 15.38s
2026-01-30 13:40:55,354 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:40:55,356 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:40:55,360 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:40:55,360 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:40:55,361 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:40:55,361 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-01-30 13:40:55,361 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:40:56,340 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:40:56,343 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'usage_trends', 'dashboard_overview']
2026-01-30 13:40:56,343 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:40:56,343 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-01-30 13:40:56,343 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'usage_trends', 'dashboard_overview']
2026-01-30 13:40:56,344 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-01-30 13:40:56,344 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 13:40:57,213 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.869s
2026-01-30 13:40:57,214 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-01-30 13:40:57,801 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:41:04,598 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:42:18,079 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:42:18,083 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:42:18,087 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:42:18,087 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:42:18,088 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:42:18,088 - mv_optimized_agent - INFO - User Query: Provide me overview of peer District  benchmarking what is the Overall Performance 
2026-01-30 13:42:18,088 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:42:19,264 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:42:19,267 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['peer_benchmarking', 'dashboard_overview']
2026-01-30 13:42:19,268 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:42:19,268 - mv_optimized_agent - INFO -    Primary Intent: peer_benchmarking
2026-01-30 13:42:19,268 - mv_optimized_agent - INFO -    All Intents: ['peer_benchmarking', 'dashboard_overview']
2026-01-30 13:42:19,268 - mv_optimized_agent - INFO -    Best MV: peer_district_metrics
2026-01-30 13:42:19,268 - mv_optimized_agent - INFO -    üìä Calling get_peer_benchmarking_summary()...
2026-01-30 13:42:19,843 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:42:20,404 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:42:29,445 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 11.36s
2026-01-30 13:44:14,104 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:44:14,112 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 13:44:14,112 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 13:44:14,149 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:44:22,737 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:44:22,738 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:44:22,741 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:44:22,741 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:44:22,782 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:44:22,782 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:44:22,782 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:44:22,784 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:44:22,784 - mv_optimized_agent - INFO - User Query: Provide me active users listing 
2026-01-30 13:44:22,784 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:44:24,508 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:44:24,535 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-01-30 13:44:24,536 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:44:24,536 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-30 13:44:24,536 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-01-30 13:44:24,536 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-30 13:44:24,536 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 13:44:27,609 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.073s
2026-01-30 13:44:27,609 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-30 13:44:28,880 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:44:29,721 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:44:49,027 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 26.24s
2026-01-30 13:48:42,731 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:48:42,741 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 13:48:42,741 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 13:48:42,808 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 13:48:57,314 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 13:48:57,314 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 13:48:57,317 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:48:57,317 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:48:57,355 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:48:57,355 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 13:48:57,356 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 13:48:57,358 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 13:48:57,358 - mv_optimized_agent - INFO - User Query: Provide me active users overview
2026-01-30 13:48:57,358 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 13:48:59,008 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:48:59,034 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'dashboard_overview']
2026-01-30 13:48:59,034 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 13:48:59,034 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-30 13:48:59,034 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'dashboard_overview']
2026-01-30 13:48:59,034 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-30 13:48:59,034 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 13:49:02,093 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.059s
2026-01-30 13:49:02,094 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-30 13:49:02,712 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 13:49:03,888 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 13:49:59,009 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 61.58s
2026-01-30 14:55:03,759 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 14:55:03,769 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 14:55:03,769 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 14:55:03,831 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 14:55:23,993 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 14:55:23,993 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 14:55:23,995 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 14:55:23,995 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 14:55:24,000 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 14:55:24,000 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 14:55:24,038 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 14:55:24,038 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 14:55:24,038 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 14:55:24,038 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 14:55:24,038 - mv_optimized_agent - INFO - User Query: Show active users list
2026-01-30 14:55:24,038 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 14:55:25,711 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 14:55:25,753 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-01-30 14:55:25,753 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 14:55:25,753 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-01-30 14:55:25,753 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-01-30 14:55:25,753 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-01-30 14:55:25,753 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 14:55:29,171 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.417s
2026-01-30 14:55:29,171 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-01-30 14:55:29,780 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 14:55:32,774 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 14:56:45,011 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 80.97s
2026-01-30 14:58:01,746 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 14:58:01,748 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 14:58:01,754 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 14:58:01,755 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 14:58:01,756 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 14:58:01,757 - mv_optimized_agent - INFO - User Query: SHow many total active users by have also provide the data grouped by schools and grade band
2026-01-30 14:58:01,757 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 14:58:02,647 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 14:58:02,657 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 14:58:02,657 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 14:58:02,657 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 14:58:02,657 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 14:58:02,658 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 14:58:02,658 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 14:58:03,517 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.859s
2026-01-30 14:58:03,517 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 14:58:04,377 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 14:58:06,637 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 14:58:28,085 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 26.33s
2026-01-30 14:59:47,663 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 14:59:47,666 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 14:59:47,671 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 14:59:47,671 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 14:59:47,672 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 14:59:47,672 - mv_optimized_agent - INFO - User Query: SHow many overall total active users, also provide the data grouped by schools and grade band
2026-01-30 14:59:47,672 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 14:59:49,808 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 14:59:49,810 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 14:59:49,810 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 14:59:49,810 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 14:59:49,810 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 14:59:49,811 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 14:59:49,811 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 14:59:50,671 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.860s
2026-01-30 14:59:50,671 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 14:59:51,528 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 14:59:58,961 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:00:43,058 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 55.38s
2026-01-30 15:03:21,753 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 15:03:21,760 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 15:03:21,760 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 15:03:21,815 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080']
2026-01-30 15:03:24,813 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 15:03:24,814 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 15:03:24,815 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:03:24,815 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:03:24,856 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:03:24,856 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:03:24,856 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 15:03:24,858 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 15:03:24,858 - mv_optimized_agent - INFO - User Query: SHow many overall total active users, also provide the data grouped by schools and grade band
2026-01-30 15:03:24,858 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 15:03:26,922 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:03:26,951 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:03:26,952 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 15:03:26,952 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 15:03:26,952 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:03:26,952 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 15:03:26,952 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 15:03:29,962 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.010s
2026-01-30 15:03:29,962 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 15:03:30,829 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 15:03:32,353 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:04:00,146 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 35.29s
2026-01-30 15:40:42,675 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-01-30 15:40:42,688 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 15:40:42,688 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 15:40:42,740 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-01-30 15:41:50,375 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 15:41:50,379 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 15:41:50,386 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 15:41:50,386 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 15:41:50,388 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:41:50,388 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:41:50,508 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:41:50,508 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:41:50,508 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 15:41:50,508 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 15:41:50,508 - mv_optimized_agent - INFO - User Query: Provide active users count grouped by schools and grade band 
2026-01-30 15:41:50,508 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 15:41:52,744 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:41:52,776 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:41:52,776 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 15:41:52,776 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 15:41:52,776 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:41:52,776 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 15:41:52,776 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 15:41:56,265 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.488s
2026-01-30 15:41:56,266 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 15:41:57,165 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 15:41:58,227 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:42:25,579 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 35.07s
2026-01-30 15:46:40,601 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-01-30 15:46:40,608 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 15:46:40,608 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 15:46:40,654 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-01-30 15:46:48,189 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 15:46:48,189 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 15:46:48,190 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:46:48,191 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:46:48,237 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:46:48,237 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:46:48,237 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 15:46:48,240 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 15:46:48,240 - mv_optimized_agent - INFO - User Query: Provide active users count grouped by schools and grade band 
2026-01-30 15:46:48,240 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 15:46:49,354 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:46:49,393 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:46:49,393 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 15:46:49,393 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 15:46:49,393 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:46:49,393 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 15:46:49,393 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 15:46:52,681 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.288s
2026-01-30 15:46:52,682 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 15:46:53,573 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 15:46:55,568 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:47:17,369 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 29.13s
2026-01-30 15:48:40,375 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-01-30 15:48:40,380 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-01-30 15:48:40,381 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-01-30 15:48:40,411 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-01-30 15:48:48,240 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 15:48:48,241 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 15:48:48,243 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:48:48,243 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:48:48,273 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:48:48,273 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:48:48,273 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 15:48:48,275 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 15:48:48,275 - mv_optimized_agent - INFO - User Query: Provide active users count grouped by schools and grade band 
2026-01-30 15:48:48,275 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 15:48:49,279 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:48:49,324 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:48:49,324 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 15:48:49,324 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 15:48:49,324 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:48:49,324 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 15:48:49,325 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 15:48:53,186 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.861s
2026-01-30 15:48:53,186 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 15:48:54,015 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 15:48:56,825 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:49:13,712 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 25.44s
2026-01-30 15:49:25,648 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-01-30 15:49:25,648 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-01-30 15:49:25,651 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-01-30 15:49:25,651 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-01-30 15:49:25,652 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-01-30 15:49:25,652 - mv_optimized_agent - INFO - User Query: Provide active users count grouped by schools and grade band 
2026-01-30 15:49:25,652 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-01-30 15:49:26,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:49:26,513 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:49:26,513 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-01-30 15:49:26,513 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-01-30 15:49:26,513 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'school_analysis', 'grade_analysis']
2026-01-30 15:49:26,513 - mv_optimized_agent - INFO -    Best MV: mv_active_users_summary
2026-01-30 15:49:26,513 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-01-30 15:49:27,344 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.831s
2026-01-30 15:49:27,344 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-01-30 15:49:28,174 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-01-30 15:49:30,202 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 15:49:43,893 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 18.24s
2026-02-02 13:00:05,666 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 13:00:05,670 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 13:00:05,671 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 13:00:05,734 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 13:02:29,307 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:02:29,311 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:02:29,319 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:02:29,319 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:02:29,331 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:02:29,332 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:02:29,371 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:02:29,371 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:02:29,371 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:02:29,371 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 13:02:29,371 - mv_optimized_agent - INFO - User Query: provide me all the active users list grouped by role and what is the total active users we have
2026-02-02 13:02:29,371 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:02:31,209 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:02:31,224 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:02:31,224 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:02:31,224 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:02:31,224 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:02:31,224 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:02:31,224 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:02:34,619 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.394s
2026-02-02 13:02:34,620 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:02:35,250 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:02:43,695 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:03:38,801 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 69.43s
2026-02-02 13:09:24,281 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:09:24,285 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:09:24,303 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:09:24,303 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:09:24,304 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 13:09:24,304 - mv_optimized_agent - INFO - User Query: provide me all the active users count grouped by role and what is the total active users we have
2026-02-02 13:09:24,304 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:09:25,763 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:09:25,776 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 13:09:25,777 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:09:25,777 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 13:09:25,777 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 13:09:25,777 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:09:25,777 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:09:26,402 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.624s
2026-02-02 13:09:26,402 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 13:09:27,288 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:09:34,375 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:09:45,470 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 21.16s
2026-02-02 13:22:33,963 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 13:22:33,968 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 13:22:33,968 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 13:22:34,002 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 13:22:48,067 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:22:48,067 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:22:48,070 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:22:48,070 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:22:48,071 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:22:48,071 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:22:48,152 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:22:48,152 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:22:48,152 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:22:48,152 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 13:22:48,152 - mv_optimized_agent - INFO - User Query: provide me all the active users count grouped by role and what is the total active users we have
2026-02-02 13:22:48,152 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:22:49,288 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:22:49,320 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:22:49,320 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:22:49,320 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:22:49,320 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:22:49,321 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:22:49,321 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:22:52,149 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.829s
2026-02-02 13:22:52,150 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:22:53,409 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:22:59,803 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:23:27,616 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 39.46s
2026-02-02 13:24:09,103 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:24:09,103 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:24:09,109 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 13:24:09,109 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:24:09,110 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 13:24:09,110 - mv_optimized_agent - INFO - User Query: provide me the active users count grouped by os 
2026-02-02 13:24:09,110 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:24:10,230 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:24:10,232 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:24:10,232 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:24:10,232 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:24:10,232 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:24:10,233 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:24:10,233 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:24:10,839 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.606s
2026-02-02 13:24:10,839 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:24:12,091 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:24:18,690 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:24:31,831 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 22.72s
2026-02-02 13:25:01,307 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:25:01,309 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:25:01,312 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:25:01,312 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:25:01,349 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:25:01,349 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:25:01,349 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:25:01,350 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 13:25:01,350 - mv_optimized_agent - INFO - User Query: provide me the active users count grouped by os 
2026-02-02 13:25:01,350 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:25:02,133 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:25:02,137 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:25:02,137 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:25:02,138 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:25:02,138 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:25:02,138 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:25:02,138 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:25:05,504 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.366s
2026-02-02 13:25:05,504 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:25:06,717 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:25:15,107 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:25:28,770 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 27.41s
2026-02-02 13:26:07,950 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:26:07,951 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:26:07,954 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:26:07,955 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:26:07,955 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 13:26:07,955 - mv_optimized_agent - INFO - User Query: provide me the users list that is using iOS data source
2026-02-02 13:26:07,955 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:26:08,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:26:08,758 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-02-02 13:26:08,758 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:26:08,758 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:26:08,758 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-02-02 13:26:08,758 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:26:08,759 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:26:09,642 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.884s
2026-02-02 13:26:09,643 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:26:10,834 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:26:12,761 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:26:20,141 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 12.19s
2026-02-02 13:26:37,697 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:26:37,699 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:26:37,702 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:26:37,703 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:26:37,703 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 13:26:37,703 - mv_optimized_agent - INFO - User Query: provide me the users list that is using windows data source
2026-02-02 13:26:37,704 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:26:38,677 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:26:38,679 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-02-02 13:26:38,679 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:26:38,679 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:26:38,679 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-02-02 13:26:38,680 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:26:38,680 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:26:39,566 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.886s
2026-02-02 13:26:39,566 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:26:40,769 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:26:44,358 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:26:51,717 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 14.01s
2026-02-02 13:26:59,792 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:26:59,792 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:26:59,794 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:26:59,795 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:26:59,795 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 13:26:59,795 - mv_optimized_agent - INFO - User Query: provide me the active users count grouped by os 
2026-02-02 13:26:59,795 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:27:00,984 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:27:00,989 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:27:00,989 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:27:00,989 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:27:00,990 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:27:00,990 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:27:00,990 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:27:01,874 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.884s
2026-02-02 13:27:01,875 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:27:03,081 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:27:06,181 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:27:18,461 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 18.67s
2026-02-02 13:27:43,418 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:27:43,419 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:27:43,430 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:27:43,430 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:27:43,431 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 13:27:43,431 - mv_optimized_agent - INFO - User Query: provide me user list those are using Chrome OS
2026-02-02 13:27:43,432 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:27:44,322 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:27:44,329 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:27:44,329 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:27:44,329 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:27:44,329 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:27:44,329 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:27:44,329 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:27:45,218 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.889s
2026-02-02 13:27:45,219 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:27:46,420 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:27:51,934 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:29:19,899 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 13:29:19,901 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 13:29:19,904 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 13:29:19,904 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 13:29:19,905 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 13:29:19,905 - mv_optimized_agent - INFO - User Query: How many types of data Source we have for usage data. Group the active users count by data source.
2026-02-02 13:29:19,905 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 13:29:21,990 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:29:21,993 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 13:29:21,993 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 13:29:21,993 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 13:29:21,993 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 13:29:21,994 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 13:29:21,994 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 13:29:22,882 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.889s
2026-02-02 13:29:22,883 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 13:29:24,088 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 13:29:33,321 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 13:29:45,846 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 25.94s
2026-02-02 20:08:48,999 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:08:49,019 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:08:49,056 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:08:49,057 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:08:49,084 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 20:08:49,085 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:08:49,088 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 20:08:49,088 - mv_optimized_agent - INFO - User Query: Provide the active users count grouped by role 
2026-02-02 20:08:49,089 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:08:50,736 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:08:50,746 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:08:50,747 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:08:50,747 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:08:50,747 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:08:50,748 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:08:50,748 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:08:50,763 - mv_query_router - ERROR - Query execution error: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2026-02-02 20:08:50,763 - mv_query_router - ERROR - Query failed after 2 attempts: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2026-02-02 20:08:50,763 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2026-02-02 20:08:50,763 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:08:50,764 - mv_query_router - ERROR - Query execution error: error with status PGRES_FATAL_ERROR and no message from the libpq
2026-02-02 20:08:50,764 - mv_query_router - ERROR - Query failed after 2 attempts: error with status PGRES_FATAL_ERROR and no message from the libpq
2026-02-02 20:08:50,765 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:08:53,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:09:01,357 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 12.25s
2026-02-02 20:09:17,954 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:09:17,959 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 20:09:17,959 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 20:09:17,989 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:09:26,116 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:09:26,116 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:09:26,118 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 20:09:26,118 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 20:09:26,161 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 20:09:26,162 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-02 20:09:26,162 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:09:26,165 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-02 20:09:26,165 - mv_optimized_agent - INFO - User Query: Provide the active users count grouped by role 
2026-02-02 20:09:26,165 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:09:29,642 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:09:29,671 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:09:29,672 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:09:29,672 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:09:29,672 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:09:29,672 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:09:29,672 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:09:33,117 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.445s
2026-02-02 20:09:33,117 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:09:34,002 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:09:41,453 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:09:53,873 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 27.71s
2026-02-02 20:10:09,394 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:10:09,395 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:10:09,400 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:10:09,400 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:10:09,437 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:10:09,438 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:10:09,438 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:10:09,438 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:10:09,438 - mv_optimized_agent - INFO - User Query: Provide the active users count grouped by role 
2026-02-02 20:10:09,438 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:10:13,331 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:10:13,333 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:10:13,333 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:10:13,333 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:10:13,334 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:10:13,334 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:10:13,334 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:10:16,259 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 2.925s
2026-02-02 20:10:16,261 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:10:17,175 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:10:24,292 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:10:37,374 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 27.94s
2026-02-02 20:10:52,506 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:10:52,514 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 20:10:52,514 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 20:10:52,544 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:11:02,163 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:11:02,163 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:11:02,165 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:11:02,165 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:11:02,203 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:11:02,203 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:11:02,203 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:11:02,204 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:11:02,205 - mv_optimized_agent - INFO - User Query: Provide the active users count grouped by role 
2026-02-02 20:11:02,205 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:11:04,102 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:11:04,136 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:11:04,136 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:11:04,136 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:11:04,136 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:11:04,136 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:11:04,136 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:11:08,079 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.942s
2026-02-02 20:11:08,079 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:11:09,079 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:11:17,247 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:11:29,697 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 27.49s
2026-02-02 20:12:13,323 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:12:13,324 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:12:13,328 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:12:13,328 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:12:13,329 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:12:13,329 - mv_optimized_agent - INFO - User Query: Provide the active users count grouped by all roles
2026-02-02 20:12:13,329 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:12:14,623 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:12:14,636 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:12:14,636 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:12:14,636 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:12:14,636 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:12:14,637 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:12:14,637 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:12:15,606 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.969s
2026-02-02 20:12:15,606 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:12:16,516 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:12:26,009 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:12:38,040 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 24.71s
2026-02-02 20:13:04,520 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:13:04,521 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:13:04,524 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:13:04,524 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:13:04,525 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:13:04,525 - mv_optimized_agent - INFO - User Query: can you provide the active users count grouped by os 
2026-02-02 20:13:04,525 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:13:06,604 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:13:06,609 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 20:13:06,610 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:13:06,610 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 20:13:06,610 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 20:13:06,610 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:13:06,610 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:13:07,246 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.635s
2026-02-02 20:13:07,246 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 20:13:08,556 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:13:15,550 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:13:27,623 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 23.10s
2026-02-02 20:13:55,340 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:13:55,341 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:13:55,343 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:13:55,343 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:13:55,344 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:13:55,344 - mv_optimized_agent - INFO - User Query: CAn you provide the list of users that is using chrome OS
2026-02-02 20:13:55,344 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:13:56,628 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:13:56,630 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-02-02 20:13:56,631 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:13:56,631 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 20:13:56,631 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-02-02 20:13:56,631 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:13:56,631 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:13:57,564 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.933s
2026-02-02 20:13:57,564 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 20:13:58,870 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:14:07,099 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:15:08,635 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 73.29s
2026-02-02 20:21:19,304 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:21:19,308 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 20:21:19,308 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 20:21:19,335 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:21:44,842 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:21:44,842 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:21:44,844 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:21:44,844 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:21:44,849 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:21:44,849 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:21:44,897 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:21:44,897 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:21:44,897 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:21:44,897 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:21:44,897 - mv_optimized_agent - INFO - User Query: provide me all the active users count grouped by role 
2026-02-02 20:21:44,897 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:21:46,850 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:21:46,881 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:21:46,881 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:21:46,882 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:21:46,882 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:21:46,882 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:21:46,882 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:21:50,481 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.599s
2026-02-02 20:21:50,482 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:21:51,406 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:21:59,492 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:22:12,193 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 27.30s
2026-02-02 20:22:18,115 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:22:18,116 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:22:18,117 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:22:18,118 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:22:18,118 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:22:18,118 - mv_optimized_agent - INFO - User Query: provide me all the active users list
2026-02-02 20:22:18,119 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:22:19,073 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:22:19,075 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-02-02 20:22:19,075 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:22:19,076 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 20:22:19,076 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-02-02 20:22:19,076 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:22:19,076 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:22:20,019 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.943s
2026-02-02 20:22:20,019 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 20:22:21,340 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:22:30,229 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:23:25,975 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:23:25,978 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:23:25,981 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:23:25,981 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:23:25,982 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:23:25,982 - mv_optimized_agent - INFO - User Query: can you provide the active users count grouped by the role 
2026-02-02 20:23:25,982 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:23:27,129 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:23:27,139 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:23:27,139 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:23:27,139 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:23:27,140 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:23:27,140 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:23:27,140 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:23:28,080 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.940s
2026-02-02 20:23:28,081 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:23:29,005 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:23:37,288 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:23:50,988 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 25.00s
2026-02-02 20:25:51,616 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:25:51,621 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 20:25:51,621 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 20:25:51,645 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:25:58,827 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:25:58,828 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:25:58,829 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:25:58,830 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:25:58,875 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:25:58,875 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:25:58,875 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:25:58,878 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:25:58,878 - mv_optimized_agent - INFO - User Query: can you provide the active users count grouped by the role 
2026-02-02 20:25:58,878 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:26:03,190 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:26:03,219 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:26:03,219 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:26:03,219 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:26:03,219 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:26:03,219 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:26:03,219 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:26:06,513 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.293s
2026-02-02 20:26:06,513 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:26:07,445 - mv_optimized_agent - INFO -    üìä Also calling get_active_users_summary() (all roles + OS)...
2026-02-02 20:26:08,731 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:26:17,831 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:26:41,703 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 42.82s
2026-02-02 20:28:10,225 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:28:10,227 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:28:10,230 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:28:10,231 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:28:10,232 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:28:10,232 - mv_optimized_agent - INFO - User Query: can you provide the active users count grouped by os 
2026-02-02 20:28:10,232 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:28:11,546 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:28:11,556 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 20:28:11,557 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:28:11,557 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 20:28:11,557 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 20:28:11,557 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:28:11,558 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:28:12,176 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.619s
2026-02-02 20:28:12,176 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 20:28:13,466 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:28:21,057 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:28:33,004 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 22.77s
2026-02-02 20:31:56,113 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:31:56,115 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:31:56,131 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:31:56,132 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:31:56,133 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:31:56,134 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:31:56,134 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:31:56,134 - mv_optimized_agent - INFO - User Query: can you provide the active users count grouped by os 
2026-02-02 20:31:56,134 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:31:59,049 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:31:59,051 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users', 'user_analytics']
2026-02-02 20:31:59,051 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:31:59,052 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 20:31:59,052 - mv_optimized_agent - INFO -    All Intents: ['active_users', 'user_analytics']
2026-02-02 20:31:59,052 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:31:59,052 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:31:59,960 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.908s
2026-02-02 20:31:59,961 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 20:32:01,300 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:32:02,563 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:32:19,987 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 23.85s
2026-02-02 20:32:26,874 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:32:26,875 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:32:26,877 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:32:26,877 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:32:26,877 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:32:26,878 - mv_optimized_agent - INFO - User Query: can you provide the active users count grouped by role
2026-02-02 20:32:26,878 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:32:30,606 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:32:30,609 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-02 20:32:30,609 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:32:30,609 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-02 20:32:30,610 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-02 20:32:30,610 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:32:30,610 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:32:31,225 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.615s
2026-02-02 20:32:31,226 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-02 20:32:32,116 - mv_optimized_agent - INFO -    üìä Also calling get_active_users_summary() (all roles + OS)...
2026-02-02 20:32:33,403 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:32:39,434 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:32:59,606 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 32.73s
2026-02-02 20:40:02,576 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:40:02,577 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:40:02,580 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:40:02,580 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:40:02,581 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:40:02,581 - mv_optimized_agent - INFO - User Query: can you provide the active users list those are using windows os
2026-02-02 20:40:02,581 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:40:04,641 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:40:04,648 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-02-02 20:40:04,648 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:40:04,648 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-02 20:40:04,648 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-02-02 20:40:04,648 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-02 20:40:04,648 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:40:05,263 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.614s
2026-02-02 20:40:05,263 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-02 20:40:06,539 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:40:07,742 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:40:20,899 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 18.32s
2026-02-02 20:56:51,148 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:56:51,154 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-02 20:56:51,154 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-02 20:56:51,193 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-02 20:56:57,566 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:56:57,566 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:56:57,569 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-02 20:56:57,570 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-02 20:56:57,573 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:56:57,573 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:56:57,609 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:56:57,609 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-02 20:56:57,609 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-02 20:56:57,609 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-02 20:56:57,609 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-02 20:56:57,609 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-02 20:57:00,010 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:57:00,044 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-02 20:57:00,044 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-02 20:57:00,044 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-02 20:57:00,044 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-02 20:57:00,044 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-02-02 20:57:00,044 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-02 20:57:03,298 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.254s
2026-02-02 20:57:03,298 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-02 20:57:03,613 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-02 20:57:05,914 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-02 20:57:45,924 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 48.31s
2026-02-04 12:42:54,297 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-04 12:42:54,304 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-04 12:42:54,305 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-04 12:42:54,380 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-04 12:48:11,680 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 12:48:11,684 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 12:48:11,693 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 12:48:11,693 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 12:48:11,697 - main - INFO - [STREAM] Received request for district 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-04 12:48:11,698 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-04 12:48:11,748 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-04 12:48:11,749 - main - INFO - Created MV-optimized agent for district: 54a70914-4697-49de-9c7f-3a97bb36346c
2026-02-04 12:48:11,749 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 12:48:11,749 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 54a70914-4697-49de-9c7f-3a97bb36346c ===
2026-02-04 12:48:11,749 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-04 12:48:11,749 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 12:48:12,995 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 12:48:13,023 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-04 12:48:13,024 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 12:48:13,024 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-04 12:48:13,024 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-04 12:48:13,024 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-02-04 12:48:13,024 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 12:48:17,052 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 4.028s
2026-02-04 12:48:17,053 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-04 12:48:17,365 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 12:48:23,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 12:49:03,654 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 51.90s
2026-02-04 12:56:09,142 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 12:56:09,145 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 12:56:09,148 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 12:56:09,148 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 12:56:09,184 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 12:56:09,184 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 12:56:09,184 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 12:56:09,185 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-04 12:56:09,185 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-04 12:56:09,185 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 12:56:10,898 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 12:56:10,901 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-04 12:56:10,901 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 12:56:10,901 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-04 12:56:10,901 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-04 12:56:10,901 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_software_metrics
2026-02-04 12:56:10,901 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 12:56:14,242 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.341s
2026-02-04 12:56:14,242 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-04 12:56:14,881 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 12:56:19,024 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 12:57:27,247 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 78.06s
2026-02-04 13:13:23,007 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-04 13:13:23,015 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-04 13:13:23,016 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-04 13:13:23,058 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-04 13:15:12,175 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:15:12,176 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:15:12,182 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:15:12,182 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:15:12,199 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:15:12,199 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:15:12,236 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:15:12,236 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:15:12,236 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 13:15:12,236 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-04 13:15:12,236 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-04 13:15:12,236 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 13:15:13,813 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:15:13,857 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-04 13:15:13,857 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 13:15:13,857 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-04 13:15:13,857 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-04 13:15:13,857 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-04 13:15:13,857 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 13:15:17,890 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 4.033s
2026-02-04 13:15:17,890 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-04 13:15:18,497 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 13:15:23,325 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:16:38,288 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 86.05s
2026-02-04 13:31:24,462 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:31:24,464 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:31:24,468 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:31:24,468 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:31:24,470 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:31:24,470 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 13:31:24,470 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-04 13:31:24,470 - mv_optimized_agent - INFO - User Query: Show me the list of authorized paid softwares with investment amount
2026-02-04 13:31:24,470 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 13:31:27,803 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:31:27,809 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment', 'software_usage', 'dashboard_overview']
2026-02-04 13:31:27,809 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 13:31:27,809 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-02-04 13:31:27,809 - mv_optimized_agent - INFO -    All Intents: ['software_investment', 'software_usage', 'dashboard_overview']
2026-02-04 13:31:27,810 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-02-04 13:31:27,810 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 13:31:31,308 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.498s
2026-02-04 13:31:31,308 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-02-04 13:34:42,712 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 13:34:52,331 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:37:45,923 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 381.45s
2026-02-04 13:40:11,214 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:40:11,215 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:40:11,219 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:40:11,219 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 13:40:11,220 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-04 13:40:11,220 - mv_optimized_agent - INFO - User Query: What is our total software investment this year?
2026-02-04 13:40:11,220 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 13:40:12,613 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:40:12,617 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_investment', 'cost_analysis', 'user_analytics']
2026-02-04 13:40:12,618 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 13:40:12,618 - mv_optimized_agent - INFO -    Primary Intent: software_investment
2026-02-04 13:40:12,618 - mv_optimized_agent - INFO -    All Intents: ['software_investment', 'cost_analysis', 'user_analytics']
2026-02-04 13:40:12,618 - mv_optimized_agent - INFO -    Best MV: mv_software_investment_summary
2026-02-04 13:40:12,618 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 13:40:14,022 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 1.403s
2026-02-04 13:40:14,022 - mv_optimized_agent - INFO -    üìä Calling get_investment_analysis()...
2026-02-04 13:40:14,903 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 13:40:20,966 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:42:27,436 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 136.21s
2026-02-04 13:50:16,922 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:50:16,924 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:50:16,929 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:50:16,929 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:50:16,931 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:50:16,931 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 13:50:16,932 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-04 13:50:16,932 - mv_optimized_agent - INFO - User Query: provide me active users count goruped by role
2026-02-04 13:50:16,932 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 13:50:18,164 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:50:18,177 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics', 'active_users']
2026-02-04 13:50:18,177 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 13:50:18,177 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-04 13:50:18,177 - mv_optimized_agent - INFO -    All Intents: ['user_analytics', 'active_users']
2026-02-04 13:50:18,178 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-04 13:50:18,178 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 13:50:19,099 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.921s
2026-02-04 13:50:19,099 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-04 13:50:19,976 - mv_optimized_agent - INFO -    üìä Also calling get_active_users_summary() (all roles + OS)...
2026-02-04 13:50:21,176 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 13:50:29,184 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:50:46,873 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 29.94s
2026-02-04 13:51:46,516 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-04 13:51:46,518 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-04 13:51:46,521 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-04 13:51:46,521 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-04 13:51:46,521 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-04 13:51:46,521 - mv_optimized_agent - INFO - User Query: What software is underutilized?
2026-02-04 13:51:46,521 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-04 13:51:48,437 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:51:48,442 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['utilization_analysis', 'software_usage']
2026-02-04 13:51:48,442 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-04 13:51:48,442 - mv_optimized_agent - INFO -    Primary Intent: utilization_analysis
2026-02-04 13:51:48,442 - mv_optimized_agent - INFO -    All Intents: ['utilization_analysis', 'software_usage']
2026-02-04 13:51:48,442 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-04 13:51:48,442 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-04 13:51:49,351 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.909s
2026-02-04 13:51:49,351 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics()...
2026-02-04 13:51:49,960 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-04 13:51:55,598 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 13:53:26,281 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 99.76s
2026-02-09 12:53:01,632 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 12:53:01,636 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-09 12:53:01,636 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-09 12:53:01,741 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 12:58:53,635 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 12:58:53,637 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 12:58:53,639 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 12:58:53,639 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 12:58:53,645 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 12:58:53,645 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 12:58:53,732 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 12:58:53,732 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 12:58:53,732 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 12:58:53,733 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 12:58:53,733 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 12:58:53,733 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 12:58:55,628 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 12:58:55,640 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 12:58:55,641 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 12:58:55,641 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 12:58:55,641 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 12:58:55,641 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 12:58:55,641 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 12:59:00,210 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 4.569s
2026-02-09 12:59:00,213 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 12:59:00,811 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 12:59:02,764 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 12:59:07,557 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 12:59:07,559 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 12:59:07,570 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 12:59:07,570 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 12:59:07,580 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 12:59:07,581 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 12:59:07,581 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 12:59:08,333 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 12:59:08,336 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 12:59:08,337 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 12:59:08,337 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 12:59:08,337 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 12:59:08,337 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 12:59:08,337 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 12:59:09,232 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.895s
2026-02-09 12:59:09,232 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 12:59:09,826 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 12:59:11,594 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 12:59:15,901 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 22.16s
2026-02-09 12:59:20,213 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 12.63s
2026-02-09 13:06:05,840 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:06:05,847 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:06:05,870 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 13:06:05,871 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 13:06:05,871 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 13:06:05,871 - mv_optimized_agent - INFO - User Query: Provide me active users list
2026-02-09 13:06:05,871 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 13:06:07,443 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:06:07,453 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['active_users']
2026-02-09 13:06:07,454 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 13:06:07,454 - mv_optimized_agent - INFO -    Primary Intent: active_users
2026-02-09 13:06:07,454 - mv_optimized_agent - INFO -    All Intents: ['active_users']
2026-02-09 13:06:07,454 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-09 13:06:07,454 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 13:06:08,357 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.903s
2026-02-09 13:06:08,357 - mv_optimized_agent - INFO -    üìä Calling get_active_users_summary()...
2026-02-09 13:06:09,575 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 13:06:11,270 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:06:20,762 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 14.89s
2026-02-09 13:06:32,063 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:06:32,064 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:06:32,068 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 13:06:32,069 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 13:06:32,069 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 13:06:32,070 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 13:06:32,070 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 13:06:32,839 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:06:32,845 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:06:32,845 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 13:06:32,845 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 13:06:32,845 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:06:32,845 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 13:06:32,845 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 13:06:33,738 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.893s
2026-02-09 13:06:33,738 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 13:06:34,334 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 13:06:35,471 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:06:45,230 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 13.16s
2026-02-09 13:06:46,398 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:07:37,973 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:07:37,976 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-09 13:07:37,976 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-09 13:07:38,005 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:07:51,124 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:07:51,125 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:07:51,130 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325, school: 65769e5b-1f85-4cd1-8ee2-509b23975be0
2026-02-09 13:07:51,130 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325 (school: 65769e5b-1f85-4cd1-8ee2-509b23975be0)
2026-02-09 13:07:51,203 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 13:07:51,203 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325 (school: 65769e5b-1f85-4cd1-8ee2-509b23975be0)
2026-02-09 13:07:51,203 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 13:07:51,204 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 13:07:51,204 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 13:07:51,204 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 13:07:52,371 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:07:52,468 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:07:52,473 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 13:07:52,473 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 13:07:52,473 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:07:52,473 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 13:07:52,473 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 13:07:55,803 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.329s
2026-02-09 13:07:55,804 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 13:07:56,408 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 13:07:58,263 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:08:12,209 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 21.01s
2026-02-09 13:08:34,497 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:08:34,498 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:08:34,501 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325, school: 65769e5b-1f85-4cd1-8ee2-509b23975be0
2026-02-09 13:08:34,502 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 13:08:34,503 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 13:08:34,503 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 13:08:34,503 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 13:08:35,226 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:08:35,228 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:08:35,229 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 13:08:35,229 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 13:08:35,229 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:08:35,229 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 13:08:35,229 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 13:08:36,117 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 0.888s
2026-02-09 13:08:36,117 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 13:08:36,718 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 13:08:38,723 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:08:55,933 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 21.43s
2026-02-09 13:36:21,837 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:37:08,021 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:50:40,080 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:50:40,083 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-09 13:50:40,083 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-09 13:50:40,220 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 13:50:57,772 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:50:57,772 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:50:57,776 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:50:57,776 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:50:57,782 - main - INFO - [STREAM] Received request for district 440134ca-1070-4090-908d-4ccecf934325, school: 65769e5b-1f85-4cd1-8ee2-509b23975be0
2026-02-09 13:50:57,783 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 440134ca-1070-4090-908d-4ccecf934325 (school: 65769e5b-1f85-4cd1-8ee2-509b23975be0)
2026-02-09 13:50:57,856 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 440134ca-1070-4090-908d-4ccecf934325
2026-02-09 13:50:57,856 - main - INFO - Created MV-optimized agent for district: 440134ca-1070-4090-908d-4ccecf934325 (school: 65769e5b-1f85-4cd1-8ee2-509b23975be0)
2026-02-09 13:50:57,856 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 13:50:57,856 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 440134ca-1070-4090-908d-4ccecf934325 ===
2026-02-09 13:50:57,856 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 13:50:57,856 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 13:50:59,528 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:50:59,547 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:50:59,547 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 13:50:59,547 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 13:50:59,548 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 13:50:59,548 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 13:50:59,548 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 13:51:02,783 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.235s
2026-02-09 13:51:02,801 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 13:51:03,151 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 13:51:04,071 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:51:19,605 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 21.74s
2026-02-09 13:52:53,401 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 13:52:53,402 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 13:52:53,408 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 13:52:53,408 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 13:52:53,437 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 13:52:53,437 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 13:52:53,437 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 13:52:53,438 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-09 13:52:53,439 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 13:52:53,439 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 13:52:54,551 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:52:54,558 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'usage_trends', 'dashboard_overview']
2026-02-09 13:52:54,558 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 13:52:54,558 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 13:52:54,558 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'usage_trends', 'dashboard_overview']
2026-02-09 13:52:54,558 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 13:52:54,558 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 13:52:57,951 - mv_optimized_agent - INFO -    ‚úÖ Dashboard metrics retrieved in 3.393s
2026-02-09 13:52:57,960 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 13:52:58,678 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 13:53:00,035 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 13:53:23,307 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 29.87s
2026-02-09 14:44:41,141 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 14:44:41,147 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 14:44:41,160 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 14:44:41,161 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 14:44:41,181 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 14:44:41,181 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 14:44:41,185 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-09 14:44:41,185 - mv_optimized_agent - INFO - User Query: how many active users we have 
2026-02-09 14:44:41,185 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 14:44:42,068 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 14:44:42,081 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics']
2026-02-09 14:44:42,082 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 14:44:42,082 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-09 14:44:42,082 - mv_optimized_agent - INFO -    All Intents: ['user_analytics']
2026-02-09 14:44:42,084 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-09 14:44:42,084 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 14:44:42,389 - mv_query_router - WARNING - Connection error (attempt 1): server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2026-02-09 14:44:44,422 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:44:44,422 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:44:44,422 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:44:44,422 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-09 14:44:44,425 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:44:44,427 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:44:44,427 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:44:44,429 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 14:44:45,356 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 14:44:47,571 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 6.39s
2026-02-09 14:44:55,857 - __main__ - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 14:44:55,860 - __main__ - INFO - Starting FIXED Educational Analytics API on 0.0.0.0:8000
2026-02-09 14:44:55,860 - __main__ - INFO - üîß Tool Intercepting Agent available for guaranteed database calls!
2026-02-09 14:44:55,890 - main - INFO - üîí CORS allowed origins: ['https://classsight.ai', 'https://www.classsight.ai', 'https://swye360.ai', 'https://www.swye360.ai', 'https://www.swye360.com', 'https://swye360.com', 'https://preview--roi-bright-future.lovable.app', 'http://localhost:8080', 'https://swye360.web.app']
2026-02-09 14:45:05,361 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 14:45:05,361 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 14:45:05,363 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 14:45:05,364 - mv_optimized_agent - INFO - Initializing MVOptimizedAgent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 14:45:05,417 - mv_optimized_agent - INFO - MVOptimizedAgent initialized successfully for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 14:45:05,417 - main - INFO - Created MV-optimized agent for district: 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 14:45:05,417 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 14:45:05,417 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-09 14:45:05,417 - mv_optimized_agent - INFO - User Query: how many active users we have 
2026-02-09 14:45:05,417 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 14:45:06,432 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 14:45:06,448 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['user_analytics']
2026-02-09 14:45:06,448 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 14:45:06,448 - mv_optimized_agent - INFO -    Primary Intent: user_analytics
2026-02-09 14:45:06,448 - mv_optimized_agent - INFO -    All Intents: ['user_analytics']
2026-02-09 14:45:06,449 - mv_optimized_agent - INFO -    Best MV: mv_dashboard_user_analytics
2026-02-09 14:45:06,449 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 14:45:06,452 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,453 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,453 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,453 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,454 - mv_optimized_agent - INFO -    üìä Calling get_user_analytics()...
2026-02-09 14:45:06,455 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,456 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,456 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:06,457 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 14:45:07,030 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 14:45:09,178 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 3.76s
2026-02-09 14:45:21,468 - main - INFO - üì® Incoming Request - Origin: http://localhost:8080 | Referer: http://localhost:8080/ | Host: 0.0.0.0:8000 | Path: /api/ask/stream
2026-02-09 14:45:21,469 - main - INFO - ‚úÖ Origin ALLOWED: http://localhost:8080
2026-02-09 14:45:21,470 - main - INFO - [STREAM] Received request for district 3ef51192-1070-4090-908d-ef3ab03b4325
2026-02-09 14:45:21,470 - main - INFO - üöÄ [STREAM] Using MV-Optimized Agent with SSE streaming
2026-02-09 14:45:21,471 - mv_optimized_agent - INFO - === MV OPTIMIZED STREAMING FOR DISTRICT 3ef51192-1070-4090-908d-ef3ab03b4325 ===
2026-02-09 14:45:21,471 - mv_optimized_agent - INFO - User Query: Generate an executive summary of our district's software ROI and usage patterns
2026-02-09 14:45:21,471 - mv_optimized_agent - INFO - üîß STEP 1: Calling materialized view tools...
2026-02-09 14:45:22,820 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 14:45:22,827 - mv_knowledge_registry - INFO - ü§ñ LLM Intent Classification: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 14:45:22,827 - mv_optimized_agent - INFO - üß† Query Intent Analysis:
2026-02-09 14:45:22,827 - mv_optimized_agent - INFO -    Primary Intent: software_roi
2026-02-09 14:45:22,827 - mv_optimized_agent - INFO -    All Intents: ['software_roi', 'software_usage', 'dashboard_overview']
2026-02-09 14:45:22,828 - mv_optimized_agent - INFO -    Best MV: mv_software_usage_analytics_v4
2026-02-09 14:45:22,828 - mv_optimized_agent - INFO -    üìä Calling get_dashboard_metrics()...
2026-02-09 14:45:22,831 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,832 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,832 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,832 - mv_optimized_agent - ERROR -    ‚ùå Dashboard metrics failed: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,832 - mv_optimized_agent - INFO -    üìä Calling get_software_analytics(order_by='avg_roi_percentage')...
2026-02-09 14:45:22,833 - mv_query_router - WARNING - Connection error (attempt 1): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,834 - mv_query_router - WARNING - Connection error (attempt 2): could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,835 - mv_query_router - ERROR - Query failed after 2 attempts: could not translate host name "aws-0-us-east-1.pooler.supabase.com" to address: nodename nor servname provided, or not known

2026-02-09 14:45:22,836 - mv_optimized_agent - INFO - üé® STEP 2: Streaming markdown analysis...
2026-02-09 14:45:24,170 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 14:45:26,875 - mv_optimized_agent - INFO - ‚úÖ MV STREAMING COMPLETED in 5.40s
